!function(){function n(n,e){function t(e,t){n.forEach(["bind","update","unbind"],function(n){var o=e[n];e[n]=function(){return t[n].apply(this,arguments),o.apply(this,arguments)}})}function o(n){return n.__v_frag}function i(n){return!n||n.forId?n:i(n.parentFrag)}function r(n){return i(o(n))}function a(n){var e=r(n);return e.scope.element}function c(n){n.parentElement.removeChild(n)}function l(n,e,t){t<n.children.length?n.insertBefore(e,n.children[t]):n.appendChild(e)}function u(n,e,t){t?n.insertBefore(e,t):n.appendChild(e)}function d(n){return n.map(r).filter(function(n){return!!n}).map(function(n){return n.scope.$index}).value()}var f={install:function(i){var r=i.directive("for"),f=n.clone(r);f.params=f.params.concat("root","options"),t(f,{bind:function(){function t(n,e,t){var o=i[e],r=i[t];n&&n.splice(o,0,n.splice(r,1)[0])}var i,r,f=this,s=this.params.options;s=n.isString(s)?JSON.parse(s):s,s=n.merge(s,{onStart:function(e){r=e.item.nextSibling,i=d(n.chain(e.from.children))},onUpdate:function(n){t(f.collection,n.newIndex,n.oldIndex),c(n.item),u(n.from,n.item,r)},onAdd:function(e){if(i=d(n.chain(e.to.children).filter(function(n){return n!==e.item})),console.log(i),f.collection){var t=a(e.item),o=i.length;if(e.newIndex>=o)f.collection.push(t);else{var r=i[e.newIndex];f.collection.splice(r,0,t)}c(e.item),l(e.from,e.item,e.oldIndex)}},onRemove:function(n){var e=f.collection;if(e&&!n.clone){var t=i[n.oldIndex];e.splice(t,1)}if(n.clone)c(n.clone),l(n.from,n.item,n.oldIndex);else{var r=n.item;o(r).parentFrag&&c(r)}}});var p=this.params.root?document.getElementById(this.params.root):this.el.parentElement;this._sortable=new e(p,s)},update:function(n){if(n&&!Array.isArray(n))throw new Error("should received an Array");this.collection=n},unbind:function(){this._sortable.destroy()}}),i.directive("dragable-for",f)}};return f}if("object"==typeof exports){var e=require("lodash"),t=require("Sortablejs");module.exports=n(e,t)}else"function"==typeof define&&define.amd?define(["lodash","Sortable"],function(e,t){return n(e,t)}):window.Vue&&window._&&window.Sortable&&(window.vueDragFor=n(window._,window.Sortable),Vue.use(window.vueDragFor))}();