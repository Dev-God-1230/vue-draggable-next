"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){function n(t){t.parentElement.removeChild(t)}function e(t,n,e){e<t.children.length?t.insertBefore(n,t.children[e]):t.appendChild(n)}function o(t,n){return t.map(function(t){return t.elm}).indexOf(n)}function i(t,n){return t?Array.prototype.map.call(n,function(n){return o(t,n)}):[]}function r(t,n){this.$emit(t.toLowerCase(),n)}function s(t){var n=this;return function(e){null!==n.list&&n["onDrag"+t](e),r.call(n,t,e)}}var l=["Start","Add","Remove","Update","End"],u=["Choose","Sort","Filter","Clone"],a=["Move"].concat(l,u).map(function(t){return"on"+t}),d={options:Object,list:{type:Array,required:!1,"default":null},clone:{type:Function,"default":function(t){return t}},element:{type:String,"default":"div"},move:{type:Function,"default":null}},c={props:d,data:function(){return{transitionMode:!1}},render:function(t){if(this.$slots["default"]&&1===this.$slots["default"].length){var n=this.$slots["default"][0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}return t(this.element,null,this.$slots["default"])},mounted:function(){var n=this,e={};l.forEach(function(t){e["on"+t]=s.call(n,t)}),u.forEach(function(t){e["on"+t]=r.bind(n,t)});var o=Object.assign({},this.options,e,{onMove:function(t){return n.onDragMove(t)}});this._sortable=new t(this.rootContainer,o),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el}},watch:{options:function(t){for(var n in t)a.indexOf(n)==-1&&this._sortable.option(n,t[n])},list:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){var t=this.$slots["default"];return this.transitionMode?t[0].child.$slots["default"]:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=i(t.getChildrenNodes(),t.rootContainer.children)})},updatePosition:function(t,n){this.list&&this.list.splice(n,0,this.list.splice(t,1)[0])},getUnderlyingVm:function(t){var n=o(this.getChildrenNodes(),t),e=this.list[n];return{index:n,element:e}},getUnderlyingPotencialDraggableComponent:function(t){var n=t.__vue__;return n&&n.$options&&"transition-group"===n.$options._componentTag?n.$parent:n},getRelatedContextFromMoveEvent:function(t){var n=t.to,e=t.related,o=this.getUnderlyingPotencialDraggableComponent(n);if(!o)return{component:o};var i=o.list,r={list:i,component:o};if(n!==e&&i&&o.getUnderlyingVm){var s=o.getUnderlyingVm(e);return Object.assign(s,r)}return r},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element)},onDragAdd:function(t){var e=t.item._underlying_vm_;if(void 0!==e){n(t.item);var o=this.visibleIndexes,i=t.newIndex,r=o.length,s=i>r-1?r:o[i];this.list.splice(s,0,e),this.computeIndexes()}},onDragRemove:function(t){e(this.rootContainer,t.item,t.oldIndex);var o=!!t.clone;if(o)return void n(t.clone);var i=this.context.index;this.list.splice(i,1)},onDragUpdate:function(t){n(t.item),e(t.from,t.item,t.oldIndex);var o=this.context.index,i=this.visibleIndexes[t.newIndex];this.updatePosition(o,i)},onDragMove:function(t){var n=this.move;if(!n||!this.list)return!0;var e=this.getRelatedContextFromMoveEvent(t),o=this.context;return Object.assign(t,{relatedContext:e,draggedContext:o}),n(t)},onDragEnd:function(t){this.computeIndexes()}}};return c}if("object"==("undefined"==typeof exports?"undefined":_typeof(exports))){var n=require("sortablejs");module.exports=t(n)}else if("function"==typeof define&&define.amd)define(["Sortable"],function(n){return t(n)});else if(window&&window.Vue&&window.Sortable){var e=t(window.Sortable);Vue.component("draggable",e)}}();