"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){function e(t){t.parentElement.removeChild(t)}function n(t,e,n){n<t.children.length?t.insertBefore(e,t.children[n]):t.appendChild(e)}function o(t,e){return t.map(function(t){return t.elm}).indexOf(e)}function i(t,e,n){t&&t.splice(n,0,t.splice(e,1)[0])}function r(t,e){return t?Array.prototype.map.call(e,function(e){return o(t,e)}):[]}function s(t,e){var n=Object(t);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n}function u(t,e){this.$emit(t.toLowerCase(),e)}function l(t){var e=this;return function(n){e["onDrag"+t](n),u.call(e,t,n)}}var d={options:Object,list:{type:Array,required:!1,"default":null},clone:{type:Function,"default":function(t){return t}},element:{type:String,"default":"div"}},c={props:d,data:function(){return{transitionMode:!1}},render:function(t){if(this.$slots["default"]&&1===this.$slots["default"].length){var e=this.$slots["default"][0];e.componentOptions&&"transition-group"===e.componentOptions.tag&&(this.transitionMode=!0)}return t(this.element,null,this.$slots["default"])},mounted:function(){this._sortable=new t(this.rootContainer,this.computedOptions),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},updated:function(){this.computeIndexes()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},computedOptions:function(){var t=this,e={};return["Start","Add","Remove","Update","End"].forEach(function(n){e["on"+n]=l.call(t,n)}),["Choose","Sort","Filter","Move","Clone"].forEach(function(n){e["on"+n]=u.bind(t,n)}),s(this.options,e)}},watch:{computedOptions:function(t){this._sortable(this.rootContainer,t)}},methods:{getChildrenNodes:function(){var t=this.$slots["default"];return this.transitionMode?t[0].child.$slots["default"]:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=r(t.getChildrenNodes(),t.rootContainer.children)})},onDragStart:function(t){if(this.list){var e=o(this.getChildrenNodes(),t.item),n=this.list[e];this.context={currentIndex:e,element:n},t.item._underlying_vm_=this.clone(n)}},onDragAdd:function(t){var n=t.item._underlying_vm_;if(this.list&&void 0!==n){e(t.item);var o=this.visibleIndexes,i=t.newIndex,r=o.length,s=i>r-1?r:o[i];this.list.splice(s,0,n),this.computeIndexes()}},onDragRemove:function(t){if(this.list){n(this.rootContainer,t.item,t.oldIndex);var o=!!t.clone;if(o)return void e(t.clone);var i=this.context.currentIndex;this.list.splice(i,1)}},onDragUpdate:function(t){if(this.list){e(t.item),n(t.from,t.item,t.oldIndex);var o=this.context.currentIndex,r=this.visibleIndexes[t.newIndex];i(this.list,o,r)}},onDragEnd:function(t){this.computeIndexes()}}};return c}if("object"==("undefined"==typeof exports?"undefined":_typeof(exports))){var e=require("sortablejs");module.exports=t(e)}else if("function"==typeof define&&define.amd)define(["Sortable"],function(e){return t(e)});else if(window&&window.Vue&&window.Sortable){var n=t(window.Sortable);Vue.component("draggable",n)}}();