"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){function e(t){t.parentElement.removeChild(t)}function n(t,e,n){n<t.children.length?t.insertBefore(e,t.children[n]):t.appendChild(e)}function i(t,e){return t.map(function(t){return t.elm}).indexOf(e)}function o(t,e){return t?Array.prototype.map.call(e,function(e){return i(t,e)}):[]}function r(t,e){this.$emit(t.toLowerCase(),e)}function s(t){var e=this;return function(n){null!==e.list&&e["onDrag"+t](n),r.call(e,t,n)}}var l=["Start","Add","Remove","Update","End"],a=["Choose","Sort","Filter","Clone"],u=["Move"].concat(l,a).map(function(t){return"on"+t}),d={options:Object,list:{type:Array,required:!1,"default":null},clone:{type:Function,"default":function(t){return t}},element:{type:String,"default":"div"},move:{type:Function,"default":null}},c={props:d,data:function(){return{transitionMode:!1}},render:function(t){if(this.$slots["default"]&&1===this.$slots["default"].length){var e=this.$slots["default"][0];e.componentOptions&&"transition-group"===e.componentOptions.tag&&(this.transitionMode=!0)}return t(this.element,null,this.$slots["default"])},mounted:function(){var e=this,n={};l.forEach(function(t){n["on"+t]=s.call(e,t)}),a.forEach(function(t){n["on"+t]=r.bind(e,t)});var i=Object.assign({},this.options,n,{onMove:function(t){return e.onDragMove(t)}});this._sortable=new t(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el}},watch:{options:function(t){for(var e in t)u.indexOf(e)==-1&&this._sortable.option(e,t[e])},list:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){var t=this.$slots["default"];return this.transitionMode?t[0].child.$slots["default"]:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=o(t.getChildrenNodes(),t.rootContainer.children)})},getUnderlyingVm:function(t){var e=i(this.getChildrenNodes(),t),n=this.list[e];return{index:e,element:n}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("changes",t)})},spliceList:function(){var t;(t=this.list).splice.apply(t,arguments)},updatePosition:function(t,e){this.list.splice(e,0,this.list.splice(t,1)[0])},getRelatedContextFromMoveEvent:function(t){var e=t.to,n=t.related,i=this.getUnderlyingPotencialDraggableComponent(e);if(!i)return{component:i};var o=i.list,r={list:o,component:i};if(e!==n&&o&&i.getUnderlyingVm){var s=i.getUnderlyingVm(n);return Object.assign(s,r)}return r},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element)},onDragAdd:function(t){var n=t.item._underlying_vm_;if(void 0!==n){e(t.item);var i=this.visibleIndexes,o=t.newIndex,r=i.length,s=o>r-1?r:i[o];this.spliceList(s,0,n),this.computeIndexes();var l={element:n,newIndex:s};this.emitChanges({added:l})}},onDragRemove:function(t){n(this.rootContainer,t.item,t.oldIndex);var i=!!t.clone;if(i)return void e(t.clone);var o=this.context.index;this.spliceList(o,1);var r={element:this.context.element,oldIndex:o};this.emitChanges({removed:r})},onDragUpdate:function(t){e(t.item),n(t.from,t.item,t.oldIndex);var i=this.context.index,o=this.visibleIndexes[t.newIndex];this.updatePosition(i,o);var r={element:this.context.element,oldIndex:i,newIndex:o};this.emitChanges({updated:r})},onDragMove:function(t){var e=this.move;if(!e||!this.list)return!0;var n=this.getRelatedContextFromMoveEvent(t),i=this.context;return Object.assign(t,{relatedContext:n,draggedContext:i}),e(t)},onDragEnd:function(t){this.computeIndexes()}}};return c}if("object"==("undefined"==typeof exports?"undefined":_typeof(exports))){var e=require("sortablejs");module.exports=t(e)}else if("function"==typeof define&&define.amd)define(["Sortable"],function(e){return t(e)});else if(window&&window.Vue&&window.Sortable){var n=t(window.Sortable);Vue.component("draggable",n)}}();